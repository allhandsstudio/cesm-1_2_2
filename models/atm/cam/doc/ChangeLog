===============================================================
Tag name: cesm1_2_2_n31_cam5_3_01
Originator(s): cacraig
Date: June 3, 2014
One-line Summary: workaround for compiler issue with PGI13.9 in tracer_data and update to rel04 externals

M       SVN_EXTERNAL_DIRECTORIES
M       models/atm/cam/src/chemistry/utils/tracer_data.F90

tag made before tests run, but will run yellowstone and goldbach pgi tests

===============================================================
===============================================================
Tag name: cesm1_2_2_n30_cam5_3_01
Originator(s): jedwards
Date: May 27, 2014
One-line Summary: New se/share external with PGI compiler workaround 

M       SVN_EXTERNAL_DIRECTORIES

Ran just the following jobs on yellowstone and they all passed:
001 sm731 TSM.sh h16c3aqdh aqua+aquaplanet_cam3 9s ........................PASS at Tue May 27 13:34:40 MDT 2014
002 er731 TER.sh h16c3aqdh aqua+aquaplanet_cam3 4+5s ......................PASS at Tue May 27 13:37:28 MDT 2014
003 bl731 TBL.sh h16c3aqdh aqua+aquaplanet_cam3 9s ........................PASS at Tue May 27 13:37:31 MDT 2014
004 sm740 TSM.sh h30c5h outfrq3s 9s .......................................PASS at Tue May 27 13:39:53 MDT 2014
005 bl740 TBL.sh h30c5h outfrq3s 9s .......................................PASS at Tue May 27 13:40:07 MDT 2014
006 sm751 TSM.sh h30c4aqdm outfrq3s+aquaplanet_cam4 9s ....................PASS at Tue May 27 13:46:19 MDT 2014
007 er751 TER.sh h30c4aqdm outfrq3s+aquaplanet_cam4 4+5s ..................PASS at Tue May 27 13:55:49 MDT 2014
008 bl751 TBL.sh h30c4aqdm outfrq3s+aquaplanet_cam4 9s ....................PASS at Tue May 27 13:55:57 MDT 2014
009 sm997 TSM_ccsm.sh ne16_g37 FC5 2d .....................................PASS at Tue May 27 13:59:28 MDT 2014
010 er997 TER_ccsm.sh ne16_g37 FC5 1+1d ...................................PASS at Tue May 27 14:04:04 MDT 2014
011 bl997 TBL_ccsm.sh ne16_g37 FC5 2d .....................................PASS at Tue May 27 14:04:07 MDT 2014


===============================================================
Tag name: cesm1_2_2_n29_cam5_3_01
Originator(s): cacraig
Date: May 26, 2014
One-line Summary: Added new CLM external and WACCM bug fix for outputting ap

M       SVN_EXTERNAL_DIRECTORIES
M       models/atm/cam/src/control/cam_history.F90

Compared to cesm1_2_2_n28_cam5_3_01
goldbach PGI: all BFB
yellowstone: all BFB except:
036 bl336 TBL.sh wm4c4h outfrq3s+waccm_1850_cam4 9s .......................FAIL! rc= 7 at Mon May 26 14:00:57 MDT 2014
073 bl379 TBL.sh wm1.9c4h outfrq24h+waccm_1850_cam4 2d ....................FAIL! rc= 7 at Mon May 26 15:59:16 MDT 2014
  kp and ap differ due to bug fix

===============================================================
===============================================================
Tag name: cesm1_2_2_n28_cam5_3_01
Origina(s): cacraig
Date: May 22, 2014
One-line Summary: Updated externals to match cesm1_2_2_rel03

Compared to cesm1_2_2_n26_cam5_3_01
goldbach PGI: all BFB
yellowstone: all BFB
===============================================================
===============================================================
Tag name: cesm1_2_2_n27_cam5_3_01
Originator(s): cacraig
Date: May 19, 2014
One-line Summary: Added two new ne120 aquaplanet datasets to namelist_defaults_cam.xml

No tests run

===============================================================
===============================================================
Tag name: cesm1_2_2_n26_cam5_3_01
Originator(s): cacraig
Date: May 19, 2014
One-line Summary: Updated to cesm1_2_2_rel02 externals

Only change was to SVN_EXTERNAL_DIRECTORIES

--- Compared to cesm1_2_2_n22_cam5_3_01
goldbach PGI: all BFB
yellowstone: all BFB except:
036 bl336 TBL.sh wm4c4h outfrq3s+waccm_1850_cam4 9s .......................FAIL! rc= 7 at Fri May 16 13:17:23 MDT 2014
051 bl373 TBL.sh fm1.9c4dh outfrq3s 9s ....................................FAIL! rc= 7 at Fri May 16 14:07:34 MDT 2014
055 bl376 TBL.sh fm1.9c4dh+testmech outfrq3s 9s ...........................FAIL! rc= 7 at Fri May 16 14:33:04 MDT 2014
058 bl374 TBL.sh fs1.9c4dh outfrq3s+1850-2005_cam4_super_fast_llnl 9s .....FAIL! rc= 7 at Fri May 16 14:40:54 MDT 2014
060 bl430 TBL.sh fm1.9c5dh outfrq3s_mozEOOH 9s ............................FAIL! rc= 7 at Fri May 16 14:54:13 MDT 2014
063 bl440 TBL.sh fsoa1.9c4dh outfrq3s_mozEOOH+soa_chem_megan_emis 9s ......FAIL! rc= 7 at Fri May 16 15:12:35 MDT 2014
073 bl379 TBL.sh wm1.9c4h outfrq24h+waccm_1850_cam4 2d ....................FAIL! rc= 7 at Fri May 16 15:36:10 MDT 2014
- These are identical to the tests which Francis identified as having answer changes due to CLM mods in cam5_3_29

These two tests fail because n22 did not run for CESM tests
087 bl992 TBL_ccsm.sh f19_g16 ETEST 2d ....................................FAIL! rc= 7 at Fri May 16 16:07:17 MDT 2014
090 bl997 TBL_ccsm.sh ne16_g37 FC5 2d .....................................FAIL! rc= 7 at Fri May 16 16:15:14 MDT 2014

===============================================================
===============================================================
Tag name: cesm1_2_2_n25_cam5_3_01
Originator(s): cacraig
Date: May 8, 2014
One-line Summary: Fix COSP build for CESM

M       models/atm/cam/bld/cam.buildnml.csh
M       models/atm/cam/bld/configure
         - put in the cosp_libdir changes from the development trunk to 
           support current CESM build process

Just ran:
001 sm397 TSM.sh f1.9c4cm outfrq3s_cosp+1850-2005_cam4 9s .................PASS at Thu May  8 15:43:46 MDT 2014
002 er397 TER.sh f1.9c4cm outfrq3s_cosp+1850-2005_cam4 4+5s ...............PASS at Thu May  8 15:45:24 MDT 2014
003 br397 TBR.sh f1.9c4cm outfrq3s_cosp+1850-2005_cam4 6+3s ...............PASS at Thu May  8 15:46:45 MDT 2014

will run further testing with future tag when update externals

===============================================================
===============================================================
Tag name: cesm1_2_2_n24_cam5_3_01
Originator(s): santos
Date: May 7, 2014
One-line Summary: Fix FWSC compset.

M       models/atm/cam/bld/namelist_files/use_cases/waccm_sc_2000_cam4.xml

No tests run - will be tested by CESM testing

===============================================================
===============================================================
Tag name: cesm1_2_2_n23_cam5_3_01
Originator(s): cacraig
Date: May 5, 2014
One-line Summary: Added ESMF #ifdef per Erik Kluzek's recommendation

M       models/atm/cam/src/cpl_esmf/atm_comp_esmf.F90

No tests run - will be tested by CESM testing

===============================================================
===============================================================
Tag name: cesm1_2_2_n22_cam5_3_01
Originator(s): fvitt
Date: 1 May 2014
One-line Summary: Chem bug fix and adjustments to use cases

M     models/atm/cam/bld/namelist_files/use_cases/2000_cam4_trop_strat_soa.xml
M     models/atm/cam/bld/namelist_files/use_cases/2000_cam5_trop_strat_mam3.xml
M     models/atm/cam/bld/namelist_files/use_cases/sd_cam4_trop_strat_soa.xml
M     models/atm/cam/bld/namelist_files/use_cases/sd_cam5_trop_strat_mam3.xml
M     models/atm/cam/src/chemistry/mozart/mo_usrrxt.F90
Aerosol diameter in MODAL surfarea, which is obtained from dgnumwet, needed
to be converted from "m" to "cm"

Pretag tests on goldbach PGI all pass
Pretag tests on yellowstone all pass except:
060 bl430 TBL.sh fm1.9c5dh outfrq3s_mozEOOH 9s ............................FAIL! rc= 7 at Wed Apr 30 19:39:22 MDT 2014
082 sm991 TSM_ccsm.sh f19_f19 F 2d ........................................FAIL! rc= 6 at Wed Apr 30 20:45:11 MDT 2014
083 er991 TER_ccsm.sh f19_f19 F 1+1d ......................................FAIL! rc= 6 at Wed Apr 30 20:45:11 MDT 2014
084 eq991 TEQ_ccsm.sh f19_f19 F f1.9c4m fcase 2d ..........................FAIL! rc= 4 at Wed Apr 30 20:45:11 MDT 2014
085 sm992 TSM_ccsm.sh f19_g16 ETEST 2d ....................................FAIL! rc= 6 at Wed Apr 30 20:45:54 MDT 2014
086 er992 TER_ccsm.sh f19_g16 ETEST 1+1d ..................................FAIL! rc= 6 at Wed Apr 30 20:45:54 MDT 2014
087 bl992 TBL_ccsm.sh f19_g16 ETEST 2d ....................................FAIL! rc= 4 at Wed Apr 30 20:45:55 MDT 2014
088 sm997 TSM_ccsm.sh ne16_g37 FC5 2d .....................................FAIL! rc= 6 at Wed Apr 30 20:46:51 MDT 2014
089 er997 TER_ccsm.sh ne16_g37 FC5 1+1d ...................................FAIL! rc= 6 at Wed Apr 30 20:46:51 MDT 2014
090 bl997 TBL_ccsm.sh ne16_g37 FC5 2d .....................................FAIL! rc= 4 at Wed Apr 30 20:46:51 MDT 2014
091 ne996 TNE_ccsm.sh f45_f45 FMOZ FMOZ+testmech 2d .......................FAIL! rc= 4 at Wed Apr 30 20:47:47 MDT 2014

===============================================================
Tag name: cesm1_2_2_n21_cam5_3_01
Originator(s): santos
Date: 30 Apr 2014
One-line Summary: New SC-WACCM configurations, and WACCM bug fixes.

M       SVN_EXTERNAL_DIRECTORIES
        - Update all externals except CLM to CESM 1.2 versions.

M       models/atm/cam/bld/build-namelist
        - Fix bug where solar_htng_spctrl_scl was .false. for SC-WACCM
          cases.
        - Only turn on circulation diags by default for WACCM with FV, and
          don't turn it on for SC-WACCM.

M       models/atm/cam/bld/configure
        - Don't turn on AoA tracers by default for SC-WACCM.

M       models/atm/cam/bld/namelist_files/namelist_defaults_cam.xml
        - Update xs_short_file and xs_long_file for waccm_mozart_sulfur.

M       models/atm/cam/bld/namelist_files/namelist_definition.xml
        - Update do_circulation_diags description.
        - Correct default waccm_forcing_type value.

D       models/atm/cam/bld/namelist_files/use_cases/waccm_cam4_nuclear_winter.xml
A       models/atm/cam/bld/namelist_files/use_cases/waccm_carma_bc_2013_cam4.xml
M       models/atm/cam/test/system/input_tests_master
        - Rename WACCM nuclear winter use_case and convert it to a generic
          CARMA black carbon use_case.

A       models/atm/cam/bld/namelist_files/use_cases/waccm_sc_1850_cam4.xml
A       models/atm/cam/bld/namelist_files/use_cases/waccm_sc_1955-2005_cam4.xml
A       models/atm/cam/bld/namelist_files/use_cases/waccm_sc_2005-2100_cam4_rcp26.xml
A       models/atm/cam/bld/namelist_files/use_cases/waccm_sc_2005-2100_cam4_rcp45.xml
A       models/atm/cam/bld/namelist_files/use_cases/waccm_sc_2005-2100_cam4_rcp85.xml
        - New SC-WACCM use_cases.

M       models/atm/cam/src/chemistry/mozart/mo_aurora.F90
M       models/atm/cam/src/chemistry/mozart/mo_photo.F90
        - Fix erroneous use of pbuf_set_field for WACCM-X.

M       models/atm/cam/src/chemistry/utils/tracer_data.F90
        - Allow zonally averaged input files to contain PS.

M       models/atm/cam/src/dynamics/fv/ctem.F90
M       models/atm/cam/src/dynamics/fv/dp_coupling.F90
M       models/atm/cam/src/dynamics/fv/zonal_mean.F90
        - Fix bug where turning off circulation diagnostics caused QBO
          nudging to produce wrong results.

M       models/atm/cam/src/dynamics/se/gravity_waves_sources.F90
        - Fix bug where calculated frontogenesis was much too high.
        - Fix threading race condition.

M       models/atm/cam/src/physics/cam/eddy_diff.F90
        - Fix issue where WACCM5 cases sometimes aborted, due to an
          excessively strict top-of-model check.

M       models/atm/cam/src/physics/cam/physics_types.F90
        - Add missing deallocation for the cid component of physics_state
          objects.

M       models/atm/cam/src/physics/rrtmg/rrtmg_state.F90
        - Lower the maximum height at which RRTMG will operate, since it
          can produce bad results above 0.01 hPa.

M       models/atm/cam/src/physics/waccm/gw_drag.F90
        - Fix issue where UTGWORO and VTGWORO diagnostics overestimated
          the actual wind tendencies (by a factor of 1/landfrac).

Tests run on yellowstone all pass except:

036 bl336 TBL.sh wm4c4h outfrq3s+waccm_1850_cam4 9s .......................FAIL! rc= 7 at Wed Apr 30 06:27:54 MDT 2014
073 bl379 TBL.sh wm1.9c4h outfrq24h+waccm_1850_cam4 2d ....................FAIL! rc= 7 at Wed Apr 30 08:26:42 MDT 2014
082 sm991 TSM_ccsm.sh f19_f19 F 2d ........................................FAIL! rc= 6 at Wed Apr 30 08:51:02 MDT 2014
083 er991 TER_ccsm.sh f19_f19 F 1+1d ......................................FAIL! rc= 6 at Wed Apr 30 08:51:03 MDT 2014
084 eq991 TEQ_ccsm.sh f19_f19 F f1.9c4m fcase 2d ..........................FAIL! rc= 4 at Wed Apr 30 08:51:03 MDT 2014
085 sm992 TSM_ccsm.sh f19_g16 ETEST 2d ....................................FAIL! rc= 6 at Wed Apr 30 08:51:47 MDT 2014
086 er992 TER_ccsm.sh f19_g16 ETEST 1+1d ..................................FAIL! rc= 6 at Wed Apr 30 08:51:47 MDT 2014
087 bl992 TBL_ccsm.sh f19_g16 ETEST 2d ....................................FAIL! rc= 4 at Wed Apr 30 08:51:47 MDT 2014
088 sm997 TSM_ccsm.sh ne16_g37 FC5 2d .....................................FAIL! rc= 6 at Wed Apr 30 08:52:43 MDT 2014
089 er997 TER_ccsm.sh ne16_g37 FC5 1+1d ...................................FAIL! rc= 6 at Wed Apr 30 08:52:43 MDT 2014
090 bl997 TBL_ccsm.sh ne16_g37 FC5 2d .....................................FAIL! rc= 4 at Wed Apr 30 08:52:43 MDT 2014
091 ne996 TNE_ccsm.sh f45_f45 FMOZ FMOZ+testmech 2d .......................FAIL! rc= 4 at Wed Apr 30 08:53:43 MDT 2014

WACCM baselines have changes in UTGWORO and VTGWORO only.

CESM tests also fail, likely because of an incompatibility in the
various externals.

===============================================================
===============================================================
Tag name: cesm1_2_2_n20_cam5_3_01
Originator(s): cacraig
Date: Aprile 25, 2014
One-line Summary: Fix broken COSP, namelist defaults, ideal physics, PGI on hopper, micro_mg_cam

M       models/atm/cam/bld/configure
          - fix PGI compilation on hopper         

M       models/atm/cam/bld/namelist_files/namelist_defaults_cam.xml
          - fix namelist defaults for CAM SE ne16np4 in CAM standalone

M       models/atm/cam/SVN_EXTERNAL_DIRECTORIES
          - use updated COSP build which allows CESM to compile it directly with their new mods

M       models/atm/cam/src/physics/cam/micro_mg_cam.F90
          - Changes from Andrew for vprco, vprao and racau

M       models/atm/cam/src/physics/cam/physpkg.F90
          - Fix for running ideal physics using threading

Tests run on yellowstone all BFB

Tests run on goldbach PGI all BFB

===============================================================
===============================================================
Tag name: cesm1_2_2_n19_cam5_3_01
Originator(s): fvitt
Date: 22 Apr 2014
One-line Summary: chemistry corrections

M     models/atm/cam/src/chemistry/mozart/mo_usrrxt.F90
 - correction to aerosol surface area used in heterogeneous chemical
   reactions when using prognostic modal aerosols

M     models/atm/cam/test/system/input_tests_master
 - correction to trop_strat_mam7 regression test

M     models/atm/cam/bld/namelist_files/use_cases/2000_cam4_trop_strat_soa.xml
M     models/atm/cam/bld/namelist_files/use_cases/2000_cam5_trop_strat_mam3.xml
M     models/atm/cam/bld/namelist_files/use_cases/sd_cam4_trop_strat_soa.xml
M     models/atm/cam/bld/namelist_files/use_cases/sd_cam5_trop_strat_mam3.xml
 - use case updates

M     models/atm/cam/src/chemistry/pp_trop_mozart/mo_setrxt.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart/mo_adjrxt.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart/chem_mods.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart/mo_sim_dat.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart/mo_indprd.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart/chem_mech.doc
M     models/atm/cam/src/chemistry/pp_trop_mozart/chem_mech.in
 - corrected rate constants for O1D + O2 reaction
 - added SO4 to external forcing list

M     models/atm/cam/src/chemistry/pp_trop_mozart_soa/chem_mods.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart_soa/mo_sim_dat.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart_soa/mo_indprd.F90
M     models/atm/cam/src/chemistry/pp_trop_mozart_soa/chem_mech.doc
M     models/atm/cam/src/chemistry/pp_trop_mozart_soa/chem_mech.in
M     models/atm/cam/src/chemistry/pp_trop_strat_soa/chem_mods.F90
M     models/atm/cam/src/chemistry/pp_trop_strat_soa/mo_sim_dat.F90
M     models/atm/cam/src/chemistry/pp_trop_strat_soa/mo_indprd.F90
M     models/atm/cam/src/chemistry/pp_trop_strat_soa/chem_mech.doc
M     models/atm/cam/src/chemistry/pp_trop_strat_soa/chem_mech.in
 - added SO4 to external forcing list

Tests run on yellowstone all BFB except:

051 bl373 TBL.sh fm1.9c4dh outfrq3s 9s ....................................FAIL! rc= 7 at Tue Apr 22 11:10:49 MDT 2014
060 bl430 TBL.sh fm1.9c5dh outfrq3s_mozEOOH 9s ............................FAIL! rc= 7 at Tue Apr 22 12:02:04 MDT 2014
 - these failures are expected due to changes in O1D+O2 reaction rate

Tests run on goldbach PGI all BFB

===============================================================
===============================================================
Tag name: cesm1_2_2_n18_cam5_3_01
Originator(s): olson, cacraig
Approved by eaton
Date: 04/18/2014
One-line Summary: Bug fixes for bugzilla 1958 and added use_cases for CMIP run

A       models/atm/cam/bld/namelist_files/use_cases/2005-2100_cam4_rcp85_bgc.xml
A       models/atm/cam/bld/namelist_files/use_cases/2005-2100_cam4_rcp45_bgc.xml
         new use cases by request of Keith Lindsay for CMIP runs

M       models/atm/cam/src/physics/cam/check_energy.F90
M       models/atm/cam/src/physics/cam/cam_diagnostics.F90
M       models/atm/cam/src/physics/cam/physpkg.F90
         bug fixes for DTCORE

Comparisons made with cesm1_2_1_n15_cam5_3_01 runs:
Tests run on yellowstone all BFB except:
036 bl336 TBL.sh wm4c4h outfrq3s+waccm_1850_cam4 9s .......................FAIL! rc= 7 at Thu Apr 17 20:48:27 MDT 2014
073 bl379 TBL.sh wm1.9c4h outfrq24h+waccm_1850_cam4 2d ....................FAIL! rc= 7 at Thu Apr 17 22:48:15 MDT 2014
         Jerry Olson confirmed that the changed answers are correct

Tests run on goldbach PGI all BFB

===============================================================
===============================================================
Tag name: cesm1_2_2_n17_cam5_3_01
Originator(s): santos, Marcus Wagner, cacraig
Date: 04/08/2014
One-line Summary: Bug fixes for bugzilla 1954 and 1919


M       models/atm/cam/src/utils/pilgrim/parutilitiesmodule.F90
         - bug fix from Marcus Wagner for bugzilla 1919 (write outside array bounds in pilgrim code)

M       models/atm/cam/src/dynamics/se/interp_mod.F90
         - bug fix from Sean Santos for bugzilla 1954 (lon-lat history file from multi-instance CAM-SE: bug and fix)



Comparisons made with cesm1_2_1_n15_cam5_3_01 runs:
Tests run on yellowstone all BFB except:
051 bl373 TBL.sh fm1.9c4dh outfrq3s 9s ....................................FAIL! rc= 7 at Mon Apr 14 11:05:15 MDT 2014
055 bl376 TBL.sh fm1.9c4dh+testmech outfrq3s 9s ...........................FAIL! rc= 7 at Mon Apr 14 11:15:17 MDT 2014
058 bl374 TBL.sh fs1.9c4dh outfrq3s+1850-2005_cam4_super_fast_llnl 9s .....FAIL! rc= 7 at Mon Apr 14 11:22:45 MDT 2014
060 bl430 TBL.sh fm1.9c5dh outfrq3s_mozEOOH 9s ............................FAIL! rc= 7 at Mon Apr 14 11:32:41 MDT 2014
063 bl440 TBL.sh fsoa1.9c4dh outfrq3s_mozEOOH+soa_chem_megan_emis 9s ......FAIL! rc= 7 at Mon Apr 14 11:51:04 MDT 2014
These tests failed in "n16" so will ignore for now.  These tests are under review by Francis Vitt.

Tests run on goldbach PGI all BFB

===============================================================
===============================================================
Tag name: cesm1_2_2_n16_cam5_3_01 Addendum
Runs on yellowstone:

Differences with baseline files:
051 bl373 TBL.sh fm1.9c4dh outfrq3s 9s ....................................FAIL! rc= 7 at Mon Apr 14 11:06:08 MDT 2014
055 bl376 TBL.sh fm1.9c4dh+testmech outfrq3s 9s ...........................FAIL! rc= 7 at Mon Apr 14 11:16:21 MDT 2014
063 bl440 TBL.sh fsoa1.9c4dh outfrq3s_mozEOOH+soa_chem_megan_emis 9s ......FAIL! rc= 7 at Mon Apr 14 11:52:07 MDT 2014

No baseline comparison done:
058 bl374 TBL.sh fs1.9c4dh outfrq3s+1850-2005_cam4_super_fast_llnl 9s .....FAIL! rc= 7 at Mon Apr 14 11:23:40 MDT 2014
060 bl430 TBL.sh fm1.9c5dh outfrq3s_mozEOOH 9s ............................FAIL! rc= 7 at Mon Apr 14 11:33:35 MDT 2014

===============================================================
Tag name: cesm1_2_2_n16_cam5_3_01
Originator(s): fvitt, cacraig
Date: 04/08/2014
One-line Summary: Francis' chemistry updates

A  +    models/atm/cam/bld/namelist_files/use_cases/sd_cam4_trop_strat_soa.xml
A  +    models/atm/cam/bld/namelist_files/use_cases/sd_cam5_trop_strat_mam3.xml
M       models/atm/cam/doc/ChangeLog
M       models/atm/cam/src/chemistry/pp_trop_mozart_mam3/mo_setrxt.F90
M       models/atm/cam/src/chemistry/pp_trop_mozart_mam3/chem_mech.doc
M       models/atm/cam/src/chemistry/pp_trop_mozart_mam3/chem_mech.in
M       models/atm/cam/src/chemistry/pp_trop_strat_soa/mo_setrxt.F90
M       models/atm/cam/src/chemistry/pp_trop_strat_soa/chem_mech.doc
M       models/atm/cam/src/chemistry/pp_trop_strat_soa/chem_mech.in
M       models/atm/cam/src/chemistry/pp_trop_strat_mam3/mo_setrxt.F90
M       models/atm/cam/src/chemistry/pp_trop_strat_mam3/chem_mech.doc
M       models/atm/cam/src/chemistry/pp_trop_strat_mam3/chem_mech.in
M       models/atm/cam/src/chemistry/pp_trop_mozart_soa/mo_setrxt.F90
M       models/atm/cam/src/chemistry/pp_trop_mozart_soa/chem_mech.doc
M       models/atm/cam/src/chemistry/pp_trop_mozart_soa/chem_mech.in
M       models/atm/cam/src/chemistry/pp_trop_strat_mam7/mo_setrxt.F90
M       models/atm/cam/src/chemistry/pp_trop_strat_mam7/chem_mech.doc
M       models/atm/cam/src/chemistry/pp_trop_strat_mam7/chem_mech.in
M       models/atm/cam/src/chemistry/mozart/mo_usrrxt.F90
M       models/atm/cam/src/dynamics/fv/inidat.F90
         - Changes from Francis

 M      models/atm/cam/test/system/TCB_ccsm.sh
 M      models/atm/cam/test/system/tests_posttag_frankfurt
 M      models/atm/cam/test/system/tests_pretag_frankfurt_lahey
 M      models/atm/cam/bld/configure
 M      models/atm/cam/bld/Makefile.in
 M      models/atm/cam/bld/config_files/definition.xml
 M      models/atm/cam/bld/namelist_files/namelist_defaults_cam.xml
 M      models/atm/cam/bld/namelist_files/namelist_definition.xml
 M      models/atm/cam/bld/namelist_files/use_cases/2000_cam4_trop_strat_soa.xml
 M      models/atm/cam/bld/namelist_files/use_cases/2000_cam5_trop_strat_mam3.xml
 M      models/atm/cam/bld/namelist_files/use_cases/2000_cam5_trop_strat_mam7.xml
 M      models/atm/cam/bld/namelist_files/use_cases/soa_chem_megan_emis.xml
 M      models/atm/cam/bld/namelist_files/use_cases/2000_cam5_trop_moz_mam3.xml
 M      models/atm/cam/bld/build-namelist
 M      models/atm/cam/src/control/camsrfexch.F90
 M      models/atm/cam/src/cpl_mct/atm_comp_mct.F90
 M      models/atm/cam/src/physics/cam/micro_mg_cam.F90
 M      models/atm/cam/src/physics/cam/wv_sat_methods.F90
 M      models/atm/cam/src/physics/cam/micro_mg1_0.F90
 M      models/atm/cam/src/physics/cam/comsrf.F90
 M      models/atm/cam/src/physics/cam/microp_driver.F90
 M      models/atm/cam/src/physics/cam/wv_saturation.F90
 M      models/atm/cam/src/physics/cam/uwshcu.F90
 M      models/atm/cam/src/physics/rrtmg/radsw.F90
 M      models/atm/cam/src/cpl_esmf/atm_comp_esmf.F90
 M      models/atm/cam/src/cpl_share/cam_cpl_indices.F90
 M      models/atm/cam/src/chemistry/utils/modal_aero_calcsize.F90
 M      models/atm/cam/src/chemistry/utils/modal_aero_wateruptake.F90
 M      models/atm/cam/src/chemistry/mozart/mz_aerosols_intr.F90
 M      models/atm/cam/src/dynamics/se/dp_coupling.F90
         - deleted svn mergeinfo files


Will run yellowstone tests when it comes back up after upgrade
Tests run on goldback PGI only.  

===============================================================
===============================================================
Tag name: cesm1_2_1_n15_cam5_3_01
Originator(s): cacraig
Date: 04/04/2014
One-line Summary: Updates for CLUBB, updated machines and warning message in cam.buildnml.csh

M       models/atm/cam/test/system/CAM_decomp.sh
M       models/atm/cam/test/system/test_driver.sh
M       models/atm/cam/test/system/CAM_runcmnd.sh
M       models/atm/cam/test/system/TCB.sh
A       models/atm/cam/test/system/tests_pretag_goldbach_nag
A       models/atm/cam/test/system/tests_pretag_goldbach_pgi
D       models/atm/cam/test/system/tests_pretag_frankfurt_nag
D       models/atm/cam/test/system/tests_pretag_frankfurt_pgi
         - updates for goldbach and yellowstone

M       models/atm/cam/test/system/nl_files/outfrq3s_clubb
         - removed clubb_history and associated fields as this is broken with threading turned on

M       models/atm/cam/bld/cam.buildnml.csh
         - added warning message per Tim Hoar's request (Jim Edwards advised on this)

M       models/atm/cam/bld/configure
         - updated to more recent configure

M       models/atm/cam/bld/Makefile.in
M       models/atm/cam/bld/build-namelist
M       models/atm/cam/SVN_EXTERNAL_DIRECTORIES
M       models/atm/cam/src/physics/cam/micro_mg_cam.F90
M       models/atm/cam/src/physics/cam/clubb_intr.F90
M       models/atm/cam/src/physics/cam/physpkg.F90
M       models/atm/cam/src/physics/cam/macrop_driver.F90
M       models/atm/cam/src/physics/cam/microp_driver.F90
         - changes to support CLUBB multi-threading

Tests run on yellowstone only.  All pass except sm374 and sm430

===============================================================
Tag name: cesm1_2_1_n14_cam5_3_01
Originator(s): eaton
Date: Wed Nov 27 11:17:46 MST 2013
One-line Summary: update externals to use release_tags

Changed tag name to indicate this tag is a candidate for the cesm1_2_1 release.

The rrtmg external was updated to incorporate the fix for the big-endian
bug in the KISS RNG (bugzilla bug 1872).

models/atm/cam/SVN_EXTERNAL_DIRECTORIES
. update all externals to use release_tag versions

===============================================================
Tag name: cesm1_2_0_n13_cam5_3_01
Originator(s): eaton
Date: Fri Nov  8 16:55:34 MST 2013
One-line Summary: update cosp external to get fix for lidar simulator

Purpose: (Notes from Jen Kay)

> -------- Original Message --------
> Subject: [cosp_cfmip] error in the CESM lidar simulator
> Date: Tue, 18 Jun 2013 16:26:24 -0600
> From: Jennifer Kay <jenkay@ucar.edu>
> To: cosp_cfmip@cgd.ucar.edu <cosp_cfmip@cgd.ucar.edu>
> 
> Dear COSP users within CESM,
> 
> There is an error in the lidar simulator released within CESM.  This
> error affects the influence of radiatively active snow on
> lidar-simulated clouds.  Because radiatively active snow is not included
> in CAM4, this error only affects CAM5.  Below we briefly describe the
> error, provide a corrected version of the lidar simulator code, and give
> an initial assessment of the impact this error on CESM simulations.
> 
> **The error**
> 
> Within the lidar simulator calculations, the maximal particle radius was
> set to 70 microns for both clouds and snow.   This size assumption is ok
> for the backscatter-to-extinction ratio, but it is not appropriate for
> the attenuation coefficient.  Thanks to Helene Chepfer for finding this
> error.
> 
> **The fix**
> 
> To fix this error, Yuying and Helene modified the lidar simulator code
> so that it uses the model snow size, not 70 microns.
> 
> The modified code is available at:
> http://www.cgd.ucar.edu/staff/jenkay/cosp/COSPdiscussionfigs/lidarbugfix/lidar_simulator.F90
> 
> This code can be inserted into a source mods directory within a CESM/CAM
> run.  For those with access to the development repository, we do plan to
> put this fix into an upcoming CAM tag.
> 
> **Diagnostics to assess impact of this error**
> 
> We ran a five year AMIP run called "amip_cosp_lidarbugfix_cesm1_1_1"
> with the above fix.  AMWG diagnostics comparing
> amip_cosp_lidarbugfix_cesm1_1_1 to a released and error-containing CAM5
> AMIP run (cam5_1deg_release_amip) and to observations are available below:
> 
> http://www.cgd.ucar.edu/staff/jenkay/cosp/diag/diag_releasedamwg/amip_cosp_lidarbugfix_cesm1_1_1-cam5_1deg_release_amip/
> 
> http://www.cgd.ucar.edu/staff/jenkay/cosp/diag/diag_releasedamwg/amip_cosp_lidarbugfix_cesm1_1_1-obs
> 
> 
> 
> **Impacts on Kay et al. 2012 COSP paper**
> http://journals.ametsoc.org/doi/abs/10.1175/JCLI-D-11-00469.1
> 
> The paper we published evaluating CAM using COSP is affected.  The paper
> overstates the influence of snow on lidar cloud fractions (Figure 8) and
> incorrectly assesses the influence of snow on lidar scattering ratios
> (Figure 9).  Published and corrected versions of these figures are
> provided below for reference.
> 
> Figure 8 published
> http://www.cgd.ucar.edu/staff/jenkay/cosp/COSPdiscussionfigs/lidarbugfix/cosp_zm_ANN_snow-nosnow.eps.png
> Figure 8 with snow bug fix
> http://www.cgd.ucar.edu/staff/jenkay/cosp/COSPdiscussionfigs/lidarbugfix/cosp_zm_ANN_snow-nosnow_lidarbugfix.eps.png
> 
> Figure 9 published
> http://www.cgd.ucar.edu/staff/jenkay/cosp/COSPdiscussionfigs/lidarbugfix/global_CFAD_SR532_CAL.ps.png
> Figure 9 with snow bug fix
> http://www.cgd.ucar.edu/staff/jenkay/cosp/COSPdiscussionfigs/lidarbugfix/global_CFAD_SR532_CAL_lidarbugfix.ps.png
> 
> 
> 
> Please feel free to contact either or both of us with any questions,
> comments, or for more information.
> 
> All the best,
> Jen and Yuying

Files changed:

models/atm/cam/SVN_EXTERNAL_DIRECTORIES
. cosp_v1_3_130213 updated to cosp_v1_3_131107

===============================================================
Tag name: cesm1_2_0_n12_cam5_3_01
Originator(s): eaton
Date: Fri Nov  1 18:08:44 MDT 2013
One-line Summary: bugfix in 1850_cam5_pm.xml use case

models/atm/cam/bld/namelist_files/use_cases/1850_cam5_pm.xml
. remove absolute path prefixes in prescribed_aero_datapath and
  aerodep_flx_datapath elements.

resolves bugzilla bug 1760

===============================================================
Tag name: cesm1_2_0_n10_cam5_3_01
Originator(s): fischer
Date: 05 June 2013
One-line Summary: cam release branch for cesm1_2_0


New features in CAM-5.3:
========================

. CAM-SE
  . Lagrangian vertical advection is now the default in the spectral
    element (SE) dynamical core.
  . Renamed HOMME dynamical core to SE dynamical core.  Moved dynamics/homme to 
    dynamics/se.  "-dyn homme" has been deprecated for configure, please use 
    "-dyn se" instead.  Note that HOMME (High Order Method Modeling
    Environment) refers to another model from which the SE dycore may also
    be run. 
  . New initial condition file for ne30np4 CAM5.
  . New tunings for ne16np4, ne30np4, and ne120np4.
  . Turned on energy fixer.
  . Rename references from "cslam" to "fvm".

. CARMA
  . New CARMA sulfate model flag "carma_do_hetchem" toggles the use of CARMA
    sulfate surface area density in heterogeneous chemistry rate calculations.
  . Source code updates for CARMA sulfate model to interact with chemistry.
  . Fix for meteor_smoke and pmc CARMA models with specified dynamics cases.
  . Use carma_do_thermo to prevent access of unallocated array in the "CRTT" 
    outfld call.
  . Change ptend names to differentiate between CARMA tendencies originating in 
    different routines.
  . Force internal calculations to use 365 day years, to deal with mismatches 
    between year lengths in CARMA and specified dynamics files.
  . Get CARMA working with debug flags turned on (Lahey, PGI, Intel).

. CLUBB
  . CLUBB was tuned for a scientifically validated release.
     . Introduced sol_facti_cloud_borne to allow tuning, default value is 1.0.
     . Changed tuning of dust_emis_fact_dyn for CLUBB.
     . Introduced ability to use CLUBB variance in microphysics. 

. CHEMISTRY
  . Refactored chemistry preprocessor to be more robust.
  . Reduce log file lengths by restrict message logging to masterproc in many of
    the chemistry modules
  . Call endrun when lower boundary conditions are specified in more than one 
    manner via bndtvghg, flbc_file, or *vmr namelist variables.  This prevents 
    multiple specification of lower boundary conditions
  . Replace chemistry package trop_strat_bam_v1 with trop_strat_soa
  . Update chemistry in packages:
      trop_mozart_mam3
      trop_mozart_mam7
      trop_mozart_soa
      trop_strat_mam3
      trop_strat_mam7
      super_fast_llnl_mam3
      super_fast_llnl_mam3_linoz
  . Changed default IC file for trop_strat_mam7 chemistry
  . SO2 forcing is no longer automatically added for waccm_mozart_sulfur.
  . Corrections to surface area calculations of modal aerosols.
  . Correction to units of the SOA*_PROD diagnostics.
  . Update to MEGAN factors, solar protons, SAD, and sulfate input file.
  . Update to photolysis cross sections.
  . Updates to master wet and dry dep species lists.
  . Zero out tropospheric sulfate above tropopause and stratospheric sulfate 
    below the tropopause.
  . Deposition velocity of EOOH mapped to CH2O.
  . Change history output of SOA* aerosols from VMR to MMR.
  . Add build-namelist use case for MOZSOA compset so that 'NEU' wet deposition 
    scheme is used.
  . Avoid index out of range error when index is greater the number of 
    registered constituents which can occur when we have chemical tracers that 
    are not registered (e.g., H2O in WACCM).
  . Map SOG species to H2O2.

. Prescribed Modal Aerosols
  . This new functionality (enabled with the "-chem none" argument to
    configure) has limited support.  Datasets have been produced for 1850
    and 2000 climatologies at 2 degree resolution.  There are currently no
    20th century transient datasets.  The 2 degree datasets will be
    automatically interpolated to other spatial resolutions, but we expect
    that the model with cam5 physics will be much more sensitive to
    interpolating the aerosols than the cam4 physics is to interpolating
    the bulk aerosols.

. Improvements to Diagnostic Radiation Calculations
  . Removed restriction that radiation diagnostic calculations reuse the water
    uptake and wet radius values calculated for the climate affecting modes.
    These quantities are now recomputed for the diagnostic modes.

. New MG1.5 microphysics
  . Added new microphysics scheme 'mg1.5', the next development version of the 
    Morrison & Gettelman stratiform cloud microphysics.  
  . Added new mg1.5 option to -microphys configure option.  "mg" is preserved as
    an alias for the old microphysics (which is now "mg1").
  . Added micro_mg_version and micro_mg_sub_version to represent the version 
    number of MG.
  . Set 1.9x2.5 MG1.5 defaults for cldfrc_rhminl and uwshcu_rpen.

. WACCM
  . Added new support for WACCM-SE.
  . Removed unused FV-specific dependencies from qbo.F90.  QBO forcing does not
    currently work with SE, but removing these dependencies is necessary for the
    module to be compiled in a SE case.
  . Added IC file for WACCM5 at 4x5 resolution
  . Removed some "#ifdef WACCM_PHYS" in cases where it can be replaced with a 
    cheap runtime conditional, "if (do_waccm_phys)".
  . Use state%uzm directly instead of requiring it as a separate argument to 
    qbo_relax, and check that it is allocated first.
  . Add "clim_modal_aero_top_press", default 1.e-4 Pa the new top level for 
    modal aerosol microphysics. By default this is high enough that modal 
    aerosol calculations are done throughout the WACCM levels, but below most 
    WACCM-X levels.  Changed top level from trop_cloud_top_lev to 
    clim_modal_aero_top_lev, force MAM top to be above the cloud top
  . Make treatment of WACCM4 and WACCM5 more consistent. Both now set the same 
    top_lev limiter, but some modules perform additional checks for CAM5 
    features to decide if they want to use it.
  . Prevent divide by 0 if wind happens to be exactly 0 at certain points in 
    WACCM's gw_drag.F90.
  . Prevent segfault in gw_drag.F90 from certain bad winds by avoiding use of 
    "abs" to limit integer indices. This is just to avoid a "red herring" crash
    in gw_drag, when the real problem is elsewhere.
  . Changed sim_year for waccmx_1996_cam4 changed to 2000.  Set so2_emis_file 
    for sd_waccm use_cases.
  . Remove deprecated waccm_mozart_v1 chemistry package. The new default is
    waccm_mozart.
  . Set defaults for nspltvrm, nspltac and nsplit when waccm_phys is used
  . Set default srf_emis_cycle_yr to 2000 for waccm_mozart_mam3 chemistry
  . Updated solar_data_file and solar_parms_file input files for SD-WACCM
  . Added default IC file for waccm5 at 4x5 resolution.
  . Added workaround for OpenMP problem for SC-WACCM in tracer_data.F90 when 
    compiled with intel compiler (yellowstone)

. SCAM
   . SCAM use_case arm95_scam has been deprecated by scam_arm95.
   . Added new SCAM use_cases to support new IOP datasets. 
      scam_arm95
      scam_arm97
      scam_gateIII
      scam_twp06
      scam_togaII
      scam_sparticus
      scam_mpace
   . Fixed SCAM date bug.

. USE_CASES
  . Added new use_case 1850-PD_cam5. This is similar to
    1850-2005_cam5 but has data from both observations and
    projections, to allow cases to be run longer.
  . Update fincl1 output variables for the following use_cases
      2000_cam5_trop_moz_mam3
      2000_cam4_trop_strat_soa
      2000_cam5_trop_strat_mam3
      2000_cam5_trop_strat_mam7
      soa_chem_megan_emis
  . Set so2_emis_file
      sd_waccm_geos5
      sd_waccm_tslt_geos5
  . Changed sim_year from 1996 to 2000
      waccmx_1996_cam4
  . Added new use_cases for SD_WACCM sulfur and nuclear winter compsets.
      sd_waccm_sulfur
      waccm_cam4_nuclear_winter
  . Added new use case for prescribed modal aerosol model
      1850_cam5_pm
  . Added new chemistry use_cases
      2000_cam5_trop_moz_mam3
      2000_cam4_trop_strat_soa
      2000_cam5_trop_strat_mam3
      2000_cam5_trop_strat_mam7
  . Removed redundant specification bndtvghg and updated SPE file
      waccm_1955-2005_cam4
      waccm_2005-2100_cam4_rcp85
      waccm_1850-2005_cam4
      waccm_2005-2100_cam4_rcp26
      waccm_2005-2100_cam4_rcp45
      1850-2005_cam4_super_fast_llnl
  . Updated megan_factors_file, corrected emission files, set 
    megan_mapping_emisfctrs to .false., created fincl1 list, and added IC files.
      mozart_megan_emis
      soa_chem_megan_emis
  . Updated IC files, specify defaults for when fv, new datasets for ne30np4,
    fix default parameters for ne120np4
      waccm_2000_cam4
      waccm_sc_2000_cam4
  . SO2 forcing is no longer automatically added for waccm_mozart_sulfur.

CAM INFRASTRUCTURE CHANGES
=============================

. History Output

  . The strategy for defining the fields that appear in the history output
    by default has changed.  A new set of namelist setable variables have
    been defined (see next bullet) and all calls to add_default in the code
    are placed inside a conditional block using one (or more) of these
    variables.  This allows much more control over defining the default
    output.  Modification of the defaults by the fincl* and fexcl* namelist
    variables is still supported.  The current default output is much
    smaller than for previous model versions and contains just the fields
    needed by the AMWG diagnostics package.

  . Namelist variables added to control history file output:
     history_amwg          Switch for diagnostic output of AMWG diag package 
                           variables default:.true.
     history_aerosol       Switch for diagnostic output of the aerosol 
                           tendencies default:.false.
     history_aero_optics   Switch for diagnostic output of the aerosol optics 
                           default:.false.
     history_budget        Switch for cam4 T/Q budget diagnostic output 
                           default:.false.
     history_eddy          Switch for diagnostic output of eddy variables 
                           default:.false.

  . New diagnostics variables for aerosol burdens and wind speeds were added.
  . Removed SRFRAD, and LCLOUD.  
  . Removed unneeded SFRAD from monthly average outputs. Bugzilla #1618

. Introduced dynamically allocated physics state/tend/ptend objects.  The
  driver for this change was to be able to reuse these objects in our
  development of physics parameterization subcolumn capabilities (see
  bullet below).

. Improve debugging capabilities
  . Added a routine to validate physics_state objects, and provide a namelist 
    option(state_debug_checks) to run this routine every time physics_update is 
    called.  state_debug_checks default is .true. for cases passing "-debug" to 
    configure, .false. otherwise.

. Refactor wv_saturation and modify the physics parameterizations to call
  the new set of interfaces for water/ice saturation properties.
   . Consolidate routines in wv_saturation.
   . Pull in related logic from other modules to wv_saturation.
   . Create wv_sat_methods to hold SVP estimation methods separately from 
     interface logic.
         - Completely refactored. A list of public routines:
           - Control routines, replacing esinti and other CAM logic:
             - wv_sat_readnl
             - wv_sat_init
             - wv_sat_final
           - SVP calculations, replacing polysvp:
             - svp_water
             - svp_ice
           - SVP table lookup, largely unchanged:
             - estblf
           - SVP to saturation specific humidity conversion:
             - svp_to_qsat
           - SVP to saturation mass mixing ratio conversion:
             - svp_to_qmmr
           - Saturation specific humidity functions, replacing all subroutines 
             of the form [a,v]qsat[d[2]][_single]
             - qsat
             - qsat_water
             - qsat_ice
           - Wet bulb temperature solver, replacing findsp[_water]:
             - findsp_vc
           - Saturation MMR over dry air (deprecated):
             - qmmr 
   . Update calculation of dqsdt in cldwat.F90 to use new code (and remove check 
     for low pressure that is now done in wv_sat_methods).

. Subcolumn development (This is an ongoing project and is not complete in
  this release) 
  . Introduced new configure parameter "psubcols".  Default is 1 = no subcolumns
  . Introduced use_subcol_microp - Switch which will be used to control
    sub-columns within microphysics.  Namelist flag is accessed in phys_control,
    but it is not used inside CAM yet.
  . state now has additional fields:
      . ngrdcol       -- Grid        -- number of active columns (on the grid).
      . nsubcol(pcols)-- Subcolumns  -- number of active subcolumns in each
                                        grid column
      . psetcols      --             -- max number of columns set - if
                                        subcols = pcols*psubcols, else = pcols
      . ncol          --             -- sum of nsubcol for all ngrdcols - 
                                        number of active columns
      . indcol(pcols*psubcols)       -- indices for mapping from subcols to
                                        grid cols
  . ptend and tend now has additional field:
      . psetcols      --             -- max number of columns set - if
                                         subcols = pcols*psubcols, else = pcols
  . Added new routine physics_ptend_copy_subcol - copies ptend on grid to ptend
    on subcols

Code cleanup and refactoring:
=============================

. Improved how CAM standalone build handles NetCDF.  Improved error handling
  for configure's use of the nf-config and nc-config scripts to determine
  the link arguments.  Also made mods to allow the user to *not* specify
  NetCDF include file or library locations.  This is useful for working
  with compiler wrapper scripts that already have this information from the
  system module settings (e.g., when using the mpif90 wrapper script on
  yellowstone).

. In physpkg.F90, added QNEG3 call after clybry_fam_adj call before QNEG3, so
  that QNEG3 enforces the qmin limit on the result, and the subsequent call to
  physics_state_check can pass.

. "endrun" is now a wrapper for "shr_sys_abort" from csm_share. This means that
  ENDRUN will no longer be printed to log files; ERROR will be printed instead.

. Simplify some constituent limiters in physics_update.

. Changed how solar namelist defaults are set so that for cam5 physics the
  defaults don't depend on which chemistry package is used.  The default
  for the solar data namelist variables was being set differently for the
  configurations "-phys cam5 -chem trop_mam3" and "-phys cam5 -chem none".
  This was changed to make the value for prescribed aerosols be the same as
  for prognostic aerosols.  Also added a check to build-namelist to
  disallow setting both solar_const and solar_data_file.  It only makes
  sense to set one of these variables.  The defaults for cam4 physics
  continue to depend on whether chemistry is used or not.

. cldwat2m_macro: Rename "qsat" to "qs" to avoid confusion with wv_saturation 
  intrinsic (and "esat" to "es" to match).

. Microphysics/macrophysics modules: Change indexes to ensure that output 
  variables do not contain uninitialized data above top_lev.

. Because cldwat_fice is shared code between CAM4 and CAM5, it has been moved to
  cloud_fraction. The resulting code is only used by RK microphysics and thus no
  longer checks microp_scheme.

. Move "tend" argument to the end of every physics_update call, "tend" is now
  an optional argument.  This eliminates the need to declare a dummy "tend"
  variable when the update is to a local copy of the physics state.

. Eliminated MODAL_AERO ifdef and replaced with rad_constituent interface inside
  ndrop.F90.

Bugs fixed:
===========

. Fix units in history output:
  - For mixing ratios and fluxes of number concentrations incorrect units
    of "kg/kg" and "kg/m2/s" have been changed to "1/kg" and "1/m2/s"
  - Output SOA aerosol species in units of kg/kg

. Fix memory leak for WACCM-SE.

. OMP bug fix for WACCM-X in dp_coupling.F90.

. Fixed long name for SNOWHICE.  Bugzilla #945

. Fix memory leak in cam_pio_utils.F90.  Bugzilla #1629

. Bug fix to pbuf_set_field in short_lived species.F90

. Added an endrun call if the FV dycore's vertical levels cross.  This
  prevents some unstable runs in various FV CAM and WACCM simulations.

. Fix saturation vapor pressure calculation for low pressure and/or very high
  temperatures.

. Remove incorrect declaration of intrinsic erfc function in
  modal_aero_rename.F90 and use version from shr_spfn_mod.

. Fix addfld call for EMIS.  Change number of levels from 1 to plev, and changed
  default averaging from 'I' to 'A'

. Modified the Makefile rules used by configure's -test option so they work with
  the recent changes to build MCT as a separate lib.  

. Fix outstanding problems with WACCM5 that cause it to crash, by enforcing
  trop_cloud_top_lev in more modules that require this limit.

. Corrections to prescribed ozone input for SC-WACCM. 
